<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="Content-Security-Policy" content="default-src 'self'; script-src 'self'; style-src 'self' 'unsafe-inline'">
  <title>ARMGDDN Companion Beta</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <div class="app-container">
    <header class="app-header">
      <h1>
        <img src="../assets/skull-logo.png" alt="ARMGDDN" style="width: 24px; height: 24px; vertical-align: middle; margin-right: 8px;">
        ARMGDDN Companion <span style="font-size: 0.6em; color: #f59e0b; font-weight: normal;">Beta</span>
      </h1>
      <div class="header-buttons">
        <button id="history-btn" class="settings-btn">üìú History</button>
        <button id="check-updates-btn" class="settings-btn">üîÑ Check for Updates</button>
        <button id="settings-btn" class="settings-btn">‚öôÔ∏è Settings</button>
      </div>
    </header>

    <div class="manifest-input-section">
      <div style="text-align: center; padding: 2rem; color: var(--text-secondary);">
        <div id="connection-status" class="connection-status disconnected" style="margin: 0 auto 1.5rem auto;">
          <span class="status-dot"></span>
          <span class="status-text">Disconnected</span>
        </div>
        <h2 style="color: var(--text-primary); margin-bottom: 1rem;">üì• ARMGDDN Companion</h2>
        <p>Click "Download with App" button on the website to start downloading.</p>
        <p style="margin-top: 0.5rem; font-size: 0.9rem;">The app will automatically open and begin the download.</p>
        <p id="version-display" style="margin-top: 1rem; font-size: 0.8rem; color: var(--accent-primary);"></p>
        <button id="help-7z-btn" class="secondary-btn" style="margin-top: 1.5rem;">
          New to .7z files?
        </button>
        <p style="margin-top: 0.5rem; font-size: 0.8rem; color: var(--text-secondary);">
          <em>This video is for the old browser but is still relevant...</em>
        </p>
        <p class="help-7z-tagline">
          OR just look for Auto extract in settings. Set it and forget it!!!
        </p>
      </div>
    </div>

    <div class="downloads-section">
      <h2>Downloads</h2>
      <div id="downloads-list" class="downloads-list">
        <div class="empty-state">No downloads yet. Click "Download with App" on the website to get started.</div>
      </div>
    </div>
  </div>

  <!-- Settings Panel -->
  <div id="settings-panel" class="settings-panel">
    <div class="settings-content">
      <div class="settings-header">
        <h2>‚öôÔ∏è Settings</h2>
        <button id="close-settings-btn" class="close-btn">√ó</button>
      </div>
      <div class="settings-form">
        <div class="form-group">
          <label for="download-path">Download Location</label>
          <div style="display: flex; gap: 0.5rem;">
            <input type="text" id="download-path" readonly style="flex: 1;">
            <button id="browse-path-btn" class="secondary-btn">Browse</button>
          </div>
        </div>
        <div class="form-group">
          <label for="max-concurrent">Max Concurrent Downloads</label>
          <select id="max-concurrent">
            <option value="1">1</option>
            <option value="2">2</option>
            <option value="3" selected>3</option>
            <option value="4">4</option>
            <option value="5">5</option>
            <option value="6">6</option>
          </select>
          <div class="setting-help-text" style="font-size: 0.8em; color: var(--text-secondary); margin-top: 0.25rem;">
            Higher values = faster speed on fiber connections.<br>
            <strong>Recommended:</strong> Keep at 3-6 for stability.
          </div>
        </div>
        <div class="form-group">
          <label for="max-speed-mbps">Download Speed Limit (MB/s)</label>
          <input type="number" id="max-speed-mbps" min="0" step="1" placeholder="0 = unlimited">
        </div>
        <div class="form-group">
          <label>
            <input type="checkbox" id="auto-extract-7z">
            Auto extract .7z after download
          </label>
        </div>
        <div class="form-group">
          <label>
            <input type="checkbox" id="show-notifications" checked>
            Show notifications
          </label>
        </div>
        <div class="form-group">
          <label>
            <input type="checkbox" id="minimize-to-tray-on-minimize">
            Minimize button hides to tray
          </label>
        </div>
        <div class="form-group">
          <label>
            <input type="checkbox" id="minimize-to-tray-on-exit">
            Close button hides to tray instead of exiting
          </label>
        </div>
        <div class="form-group">
          <label>
            <input type="checkbox" id="auto-update">
            Auto-update (download + install updates automatically)
          </label>
        </div>
        <div class="form-group">
          <label>
            <input type="checkbox" id="start-with-os-startup">
            Start with OS startup
          </label>
        </div>
        <button id="save-settings-btn" class="primary-btn">Save Settings</button>
      </div>
    </div>
  </div>

  <!-- History Panel -->
  <div id="history-panel" class="settings-panel">
    <div class="settings-content" style="max-width: 600px;">
      <div class="settings-header">
        <h2>üìú Download History</h2>
        <button id="close-history-btn" class="close-btn">√ó</button>
      </div>
      <div class="history-content">
        <div class="history-actions">
          <button id="clear-history-btn" class="secondary-btn">Clear History</button>
        </div>
        <div id="history-list" class="history-list">
          <div class="empty-state">No download history yet.</div>
        </div>
      </div>
    </div>
  </div>

  <!-- 7z Help Panel -->
  <div id="help-7z-panel" class="settings-panel">
    <div class="settings-content" style="max-width: 720px;">
      <div class="settings-header">
        <h2>New to .7z files?</h2>
        <button id="close-help-7z-btn" class="close-btn">√ó</button>
      </div>
      <div class="help-7z-content">
        <p class="help-7z-text">
          This short video shows how to open and extract multi-part .7z archives after your download completes.
        </p>
        <video id="help-7z-video" class="help-7z-video" controls>
          <source src="../assets/newmultipartzip.mp4" type="video/mp4">
          Your system does not support embedded video playback.
        </video>
      </div>
    </div>
  </div>

  <script src="renderer.js"></script>
</body>
</html>
